(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();const K=document.getElementById("pen-tool"),g=document.getElementById("line-width"),m=document.getElementById("eraser-tool"),T=document.getElementById("color-picker"),W=document.getElementById("reset-tool"),M=document.getElementById("fill-tool"),I=document.getElementById("solid-shape"),D=document.getElementById("undobutton"),O=document.getElementById("redobutton"),B=document.getElementById("drawRectangle"),x=document.getElementById("drawEllipse"),S=document.getElementById("drawTriangle"),b=document.getElementById("help"),E=document.getElementById("help-text"),i=document.getElementById("canvas"),t=i.getContext("2d");let f=!1,s=[],y=[],w=0,v=0,o=h;function a(){const e=document.getElementById("color-picker").value,c=document.getElementById("current-color");c.style.fill=e,m.checked||(t.strokeStyle=e,t.fillStyle=e)}a();T.addEventListener("input",a);function F(){const e=g.value;t.lineWidth=e}g.addEventListener("change",F);function C(){m.checked&&(t.strokeStyle="#FFF",t.fillStyle="#FFF")}m.addEventListener("click",C);function z(e){e.buttons===1&&(f=!0,t.beginPath(),K.checked&&(a(),R(e)),w+=1),o=h(i,e)}i.addEventListener("mousedown",z);function N(e){f&&(B.checked&&(a(),U(e)),x.checked&&(a(),q(e)),S.checked&&(a(),X(e)),s.push(i.toDataURL()),f=!1),setTimeout(()=>{o=0},0)}i.addEventListener("mouseup",N);function h(e,c){var l=e.getBoundingClientRect(),d=e.width/l.width,n=e.height/l.height;return{x:(c.clientX-l.left)*d,y:(c.clientY-l.top)*n}}function R(e){if(B.checked||x.checked||S.checked||!f)return;let{x:c,y:l}=h(i,e);t.lineTo(c,l),t.stroke()}i.addEventListener("mousemove",R);function U(e){if(!f)return;let{x:c,y:l}=h(i,e),d=c-o.x,n=l-o.y;t.strokeRect(o.x,o.y,d,n),I.checked&&t.fillRect(o.x,o.y,d,n)}function q(e){if(!f)return;let{x:c,y:l}=h(i,e),d=c-o.x,n=l-o.y,r=o.x+d/2,u=o.y+n/2,p=Math.abs(d/2),P=Math.abs(n/2);t.beginPath(),t.ellipse(r,u,p,P,0,0,2*Math.PI),t.stroke(),I.checked&&t.fill()}function X(e){if(!f)return;let{x:c,y:l}=h(i,e);const d=Math.sqrt(Math.pow(c-o.x,2)+Math.pow(l-o.y,2)),n=(c-o.x)/2,r=Math.sqrt(3)/2*d,u=o.x+n,p=o.y+r;t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(c,l),t.lineTo(u,p),t.closePath(),t.stroke(),I.checked&&t.fill()}function Y(){t.reset(),a(),s.push(i.toDataURL())}W.addEventListener("click",Y);function A(){m.checked||(a(),t.fillRect(0,0,i.width,i.height),s.push(i.toDataURL()))}M.addEventListener("click",A);function k(){if(v=w,y.push(i.toDataURL()),s.length>0){t.clearRect(0,0,i.width,i.height),s.pop();const e=new Image;e.src=s[s.length-1],e.addEventListener("load",()=>{t.drawImage(e,0,0)})}}window.addEventListener("keydown",e=>{e.key==="z"&&e.ctrlKey&&k(),e.metaKey==="z"&&e.ctrlKey&&k()});D.addEventListener("click",k);function L(){if(s.push(i.toDataURL()),y.length>0){const e=new Image;e.src=y.pop(),e.addEventListener("load",()=>{t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0)})}}window.addEventListener("keydown",e=>{w>v?y=[]:(e.key==="y"&&e.ctrlKey||e.metaKey==="y"&&e.ctrlKey)&&L()});O.addEventListener("click",()=>{w>v?y=[]:L()});function V(e){t.lineWidth!==25&&((e.key==="["&&e.ctrlKey||e.key==="["&&e.metaKey)&&(t.lineWidth+=1),g.value=t.lineWidth)}window.addEventListener("keydown",V);function j(e){t.lineWidth!==1&&((e.key==="]"&&e.ctrlKey||e.key==="]"&&e.metaKey)&&(t.lineWidth-=1),g.value=t.lineWidth)}window.addEventListener("keydown",j);function G(){E.classList.toggle("active")}b.addEventListener("click",G);window.addEventListener("click",e=>{e.target!==b&&E.classList.contains("active")&&E.classList.remove("active")});
